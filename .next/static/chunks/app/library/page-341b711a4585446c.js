(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{805:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]])},926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return a.findSourceMapURL}});let s=r(1209),a=r(5153),i=r(7197)},3017:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(e)}},3630:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5970:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115),i=r(2619),l=r.n(i),n=r(926);let c=(0,n.createServerReference)("405496594dce14d0e9649db39159f5c734ba4026d1",n.callServer,void 0,n.findSourceMapURL,"getAllStories"),d=(0,n.createServerReference)("40082c46d831d770d646fa39e013d0ecf4383c885d",n.callServer,void 0,n.findSourceMapURL,"deleteStory");var o=r(3017),h=r(6204),m=r(7187),x=r(805),p=r(9338),u=r(3630),g=r(4294);let b=(0,g.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),f=(0,g.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function v(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[n,g]=(0,a.useState)(""),[v,y]=(0,a.useState)(new Set);(0,a.useEffect)(()=>{j()},[]);let j=async()=>{let e=await c(50);e.data?t(e.data):g(e.error||"Erreur de chargement"),i(!1)},N=async(r,s)=>{s.preventDefault(),s.stopPropagation(),confirm("Es-tu s\xfbr de vouloir supprimer cette histoire ?")&&((await d(r)).error?alert("Erreur lors de la suppression"):(t(e.filter(e=>e.id!==r)),(0,o.N)()))};return(0,s.jsxs)("main",{className:"min-h-screen bg-gradient-to-b from-indigo-950 via-purple-950 to-indigo-950",children:[(0,s.jsxs)("header",{className:"p-4 flex items-center justify-between",children:[(0,s.jsxs)(l(),{href:"/",onClick:()=>(0,o.N)(),className:"flex items-center gap-2 text-indigo-300 hover:text-white transition-colors",children:[(0,s.jsx)(h.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-medium",children:"Retour"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.A,{className:"w-5 h-5 text-amber-400"}),(0,s.jsx)("span",{className:"font-bold text-white",children:"Mes histoires"})]}),(0,s.jsxs)(l(),{href:"/choose-hero",onClick:()=>(0,o.N)(),className:"bg-amber-500 hover:bg-amber-400 text-black font-bold py-2 px-4 rounded-lg flex items-center gap-1.5 text-sm transition-colors",children:[(0,s.jsx)(x.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Nouvelle"})]})]}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 pb-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl sm:text-4xl font-black text-white mb-2",children:"Biblioth\xe8que"}),(0,s.jsxs)("p",{className:"text-indigo-300",children:[e.length," histoire",e.length>1?"s":""," cr\xe9\xe9e",e.length>1?"s":""]})]}),r&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),(0,s.jsx)("p",{className:"text-indigo-300 font-medium",children:"Chargement des histoires..."})]}),n&&(0,s.jsx)("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-6 text-center max-w-md mx-auto",children:(0,s.jsx)("p",{className:"text-red-300 font-medium",children:n})}),!r&&0===e.length&&(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-indigo-800/50 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,s.jsx)(m.A,{className:"w-12 h-12 text-indigo-400"})}),(0,s.jsx)("p",{className:"text-white font-bold text-xl mb-2",children:"Aucune histoire encore"}),(0,s.jsx)("p",{className:"text-indigo-400 mb-6",children:"Cr\xe9e ta premi\xe8re histoire magique !"}),(0,s.jsxs)(l(),{href:"/choose-hero",onClick:()=>(0,o.N)(),className:"inline-flex items-center gap-2 bg-amber-500 hover:bg-amber-400 text-black font-bold py-3 px-6 rounded-xl transition-colors",children:[(0,s.jsx)(p.A,{className:"w-5 h-5"}),"Commencer ✨"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:e.map(e=>(0,s.jsxs)("div",{className:"group bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 relative",children:[(0,s.jsx)("button",{onClick:t=>N(e.id,t),className:"absolute top-3 right-3 z-20 bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200",title:"Supprimer l'histoire",children:(0,s.jsx)(u.A,{className:"w-4 h-4"})}),(0,s.jsxs)(l(),{href:"/read-story?id=".concat(e.id),onClick:()=>(0,o.N)(),className:"block",children:[(0,s.jsxs)("div",{className:"relative aspect-[4/3] bg-gradient-to-br from-indigo-100 to-purple-100 overflow-hidden",children:[e.image_url&&!v.has(e.id)?(0,s.jsx)("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500",onError:()=>{var t;return t=e.id,void y(e=>new Set(e).add(t))},loading:"lazy"}):(0,s.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-indigo-200 to-purple-200",children:[(0,s.jsx)(m.A,{className:"w-16 h-16 text-indigo-400 mb-2"}),(0,s.jsx)("span",{className:"text-indigo-500 text-sm font-medium",children:"Illustration en cours"})]}),(0,s.jsxs)("div",{className:"absolute top-3 left-3 ".concat((e=>{switch(e){case"Aventure":return"bg-orange-500";case"Amiti\xe9":return"bg-pink-500";case"Apprentissage":return"bg-blue-500";default:return"bg-amber-500"}})(e.theme)," text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 shadow-lg"),children:[(0,s.jsx)("span",{children:(e=>{switch(e){case"Aventure":return"⚔️";case"Amiti\xe9":return"\uD83E\uDD1D";case"Apprentissage":return"\uD83D\uDCDA";default:return"✨"}})(e.theme)}),(0,s.jsx)("span",{className:"hidden sm:inline",children:e.theme||"Histoire"})]}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-2 line-clamp-2 group-hover:text-amber-600 transition-colors",children:e.title}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mb-3",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(b,{className:"w-4 h-4"}),e.profile.first_name]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(f,{className:"w-4 h-4"}),e.created_at?new Date(e.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}):"Date inconnue"]})]}),(0,s.jsxs)("p",{className:"text-gray-400 text-sm line-clamp-2 leading-relaxed",children:[e.content.substring(0,120),"..."]}),(0,s.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-100",children:(0,s.jsxs)("span",{className:"text-amber-600 font-semibold text-sm flex items-center gap-1 group-hover:gap-2 transition-all",children:["Lire l'histoire",(0,s.jsx)("span",{className:"group-hover:translate-x-1 transition-transform",children:"→"})]})})]})]})]},e.id))})]})]})}},6204:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7187:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},8442:(e,t,r)=>{Promise.resolve().then(r.bind(r,5970))},9338:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(4294).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])}},e=>{e.O(0,[796,441,255,358],()=>e(e.s=8442)),_N_E=e.O()}]);